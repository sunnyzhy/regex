# 正则表达式

## 匹配次数

### ```{0,1}、{0,}、{1,}、{3}```

1. ```{0,1}```：匹配 ```0``` 次或 ```1``` 次 
2. ```{0,}```：匹配 ```0``` 次以上，逗号后面为空表示无限次的意思 
3. ```{1,}```：匹配 ```1``` 次以上 
4. ```{3}```：匹配 ```3``` 次，它是 ```{3,3}``` 的简写形式

注意：

1. 大括号里的第一位数字不能大于第二位数字
2. ```[0-9]{1}``` 等价于 ```[0-9]```

### ```?、??```

匹配 ```0``` 次或 ```1``` 次，可以理解为 ```{0,1}``` 的简写形式。```??``` 是 ```?``` 的非匹配优先版本。

示例：

1. ```https?``` 用于匹配 ```http```、```https```
2. ```(https?://)?``` 用于匹配 ```https?://``` 可有可无的情况： ```http://```、```https://```、```空字符串```

### ```*```

匹配 ```0``` 次以上，可以理解为 ```{0,}``` 的简写形式。

常见用法：

1. ```.*```：贪婪模式，匹配优先，匹配除换行外的任意字符 0 次以上 
2. ```.*?```：懒惰模式，非匹配优先，匹配除换行外的任意字符 0 次以上 
 
### ```+```

匹配 ```1``` 次以上，可以理解为 ```{1,}``` 的简写形式。

常见用法：

1. ```.+```：贪婪模式，匹配优先，匹配除换行外的任意字符 ```1``` 次以上 
2. ```.+?```：懒惰模式，非匹配优先，匹配除换行外的任意字符 ```1``` 次以上 
 
总结：

- 量词本身使用时，都是贪婪模式匹配，而量词和 ```?``` 能结合成懒惰模式匹配。 
- 贪婪模式匹配就是***尽可能多***地匹配，懒惰模式匹配就是***尽可能少***地匹配。

## 分组

### ```(regex)```

捕获分组，会保存每个分组里匹配的值，从左到右，分组的索引顺序为：

1. 默认第 ```0``` 个分组是满足正则表达式所匹配到的一段字符串
2. 第一个出现的分组索引为 ```1```，第二个为 ```2```，以此类推

示例：

1. 字符串 ```123abc456def```，正则表达式 ```([0-9]+)([a-z]+)([0-9]+)```，匹配的结果：
   - ```group()``` 或 ```group(0)``` 是 ```123abc456```
   - ```group(1)``` 是 ```123```
   - ```group(2)``` 是 ```abc```
   - ```group(3)``` 是 ```456```

### ```(?<name>regex)```

捕获分组，并给分组进行命名，会保存每个分组里匹配的值，不影响原来的索引分组情况，也就是说既可以使用组名获取分组，也可以使用索引获取分组。

示例：

1. 字符串 ```123abc456def```，正则表达式 ```(?<p1>[0-9]+)(?<p2>[a-z]+)(?<p3>[0-9]+)```，匹配的结果：
   - ```group()``` 或 ```group(0)``` 是 ```123abc456```
   - ```group("p1")``` 是 ```123```
   - ```group("p2")``` 是 ```abc```
   - ```group("p3")``` 是 ```456```

### ```(?:regex)```

非捕获分组，跟捕获分组唯一的区别在于，非捕获分组不会保存匹配的值。

示例：

1. 字符串 ```123abc456def```，正则表达式 ```(?:[0-9]+)([a-z]+)([0-9]+)```，匹配的结果：
   - ```group()``` 或 ```group(0)``` 是 ```123abc456```
   - ```group(1)``` 是 ```abc```
   - ```group(2)``` 是 ```456```

注意：在 java 中使用正则表达式获取分组数据的时候，一定要先调用 ```find()```，再调用 ```group()``` 或 ```group(int group``` 才能获取分组数据。

## 零宽断言

- 零宽，就是没有宽度，只匹配位置，不匹配内容，即匹配到的字符串不会被捕获
- 断言，其结果只有 ```true/false```

### ```(?=regex)```

零宽度正先行断言，是一个非捕获分组的匹配。以 ```xxx(?=regex)``` 为例，就是匹配以 ```regex``` 结尾的内容 ```xxx```。

示例：

```Windows(?=95|98|NT|2000)``` 能匹配 ```Windows95```、```Windows98```、```WindowsNT```、```Windows2000``` 中的 ```Windows```，但不能匹配 ```Windows3.1``` 中的 ```Windows```。

### ```(?!regex)```

零宽度负先行断言，是一个非捕获分组的匹配。以 ```xxx(?!regex)``` 为例，就是匹配不以 ```regex``` 结尾的内容 ```xxx```。

示例：

```Windows(?!95|98|NT|2000)``` 能匹配 ```Windows3.1``` 中的 ```Windows```，但不能匹配 ```Windows95```、```Windows98```、```WindowsNT```、```Windows2000``` 中的 ```Windows```。

### ```(?<=regex)```

零宽度正后发断言，是一个非捕获分组的匹配。以 ```(?<=regex)xxx``` 为例，就是匹配以 ```regex``` 开头的内容 ```xxx```。

示例：

```(?<=95|98|NT|2000)Windows``` 能匹配 ```95Windows```、```98Windows```、```NTWindows```、```2000Windows``` 中的 ```Windows```，但不能匹配 ```3.1Windows``` 中的 ```Windows```。

### ```(?<!regex)```

零宽度负后发断言，是一个非捕获分组的匹配。以 ```(?<!regex)xxx``` 为例，就是匹配不以 ```regex``` 开头的内容 ```xxx```。

示例：

```(?<!95|98|NT|2000)Windows``` 能匹配 ```3.1Windows``` 中的 ```Windows```，但不能匹配 ```95Windows```、```98Windows```、```NTWindows```、```2000Windows``` 中的 ```Windows```。
